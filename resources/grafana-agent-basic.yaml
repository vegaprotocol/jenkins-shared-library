# For a full configuration reference, see: https://grafana.com/docs/agent/latest/configuration/.
server:
  log_level: warn

metrics:
  global:
    scrape_interval: 60s
    remote_write:
      - url: ${PROMETHEUS_URL}
        basic_auth:
          username: ${PROMETHEUS_USERNAME}
          password: ${PROMETHEUS_PASSWORD}

  wal_directory: '/var/lib/grafana-agent'
  configs:
    - name: agent
      scrape_configs:
       - job_name: vega0
         static_configs:
            - targets:
                - 127.0.0.1:2102
         relabel_configs:
           - replacement: ${HOSTNAME}
             source_labels:
                - __address__
             target_label: instance
       - job_name: vega1
         static_configs:
            - targets:
                - 127.0.0.1:2112
         relabel_configs:
           - replacement: ${HOSTNAME}
             source_labels:
                - __address__
             target_label: instance
       - job_name: vega2
         static_configs:
            - targets:
                - 127.0.0.1:2122
         relabel_configs:
           - replacement: ${HOSTNAME}
             source_labels:
                - __address__
             target_label: instance
       - job_name: vega3
         static_configs:
            - targets:
                - 127.0.0.1:2132
         relabel_configs:
           - replacement: ${HOSTNAME}
             source_labels:
                - __address__
             target_label: instance
       - job_name: vega4
         static_configs:
            - targets:
                - 127.0.0.1:2142
         relabel_configs:
           - replacement: ${HOSTNAME}
             source_labels:
                - __address__
             target_label: instance
       - job_name: vega5
         static_configs:
            - targets:
                - 127.0.0.1:2152
         relabel_configs:
           - replacement: ${HOSTNAME}
             source_labels:
                - __address__
             target_label: instance
       - job_name: vega6
         static_configs:
            - targets:
                - 127.0.0.1:2162
         relabel_configs:
           - replacement: ${HOSTNAME}
             source_labels:
                - __address__
             target_label: instance

       - job_name: datanode2
         static_configs:
            - targets:
                - 127.0.0.1:2123
         relabel_configs:
           - replacement: ${HOSTNAME}
             source_labels:
                - __address__
             target_label: instance
       - job_name: datanode3
         static_configs:
            - targets:
                - 127.0.0.1:2133
         relabel_configs:
           - replacement: ${HOSTNAME}
             source_labels:
                - __address__
             target_label: instance
       - job_name: datanode4
         static_configs:
            - targets:
                - 127.0.0.1:2143
         relabel_configs:
           - replacement: ${HOSTNAME}
             source_labels:
                - __address__
             target_label: instance
       - job_name: datanode5
         static_configs:
            - targets:
                - 127.0.0.1:2153
         relabel_configs:
           - replacement: ${HOSTNAME}
             source_labels:
                - __address__
             target_label: instance
       - job_name: datanode6
         static_configs:
            - targets:
                - 127.0.0.1:2163
         relabel_configs:
           - replacement: ${HOSTNAME}
             source_labels:
                - __address__
             target_label: instance

integrations:
  agent:
    enabled: true
  node_exporter:
    enabled: true
    include_exporter_metrics: true
    disable_collectors:
      - "mdadm"
    metric_relabel_configs:
      - replacement: ${HOSTNAME}
        source_labels:
          - __address__
        target_label: instance
