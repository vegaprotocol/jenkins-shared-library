.instanceTemplate: &instance-template
    amiOwners: 355206837991
    amiFilters:
        - name: "tag:Name"
          values: "jenkins-agent"
        - name: "tag:Version"
          values: "v0.1.11"
    type: T32xlarge
    zone: eu-west-2c
    securityGroups: jenkins-agent
    remoteFS: /jenkins
    remoteAdmin: ubuntu
    description: general
    labelString: general system-tests
    mode: NORMAL
    idleTerminationMinutes: 5
    amiType:
        unixData:
        sshPort: 22
    initScript: |
        curl -L -o /usr/local/bin/init.sh https://raw.githubusercontent.com/vegaprotocol/jenkins-shared-library/main/jcasc/scripts/init.sh
        /usr/local/bin/init.sh

jenkins:
    systemMessage: "Welcome to Vegaprotocol Jenkins Instance :)!"
    clouds:
        - amazonEC2:
              cloudName: eu-west-2
              credentialsId: aws-jenkins
              region: eu-west-2
              sshKeysCredentialsId: aws-jenkins-ssh
              templates:
                  - *instance-template
                  - <<: *instance-template
                    description: private-network
                    securityGroups: jenkins-dv-network
                    idleTerminationMinutes: 1
                    labelString: private-network
                  - <<: *instance-template
                    description: system-tests-capsule
                    type: M6iXlarge
                    labelString: system-tests-capsule
                  - <<: *instance-template
                    description: test-instance
                    labelString: test-instance
                    amiFilters:
                        - name: "tag:Name"
                          values: "jenkins-agent"
                        - name: "tag:Version"
                          values: "v0.1.11"
                  - <<: *instance-template
                    description: non-validator
                    labelString: non-validator
                    type: T3Medium
                    securityGroups: jenkins-non-validator
